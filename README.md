# AliExpress Smart Ads - Auto Banners for WordPress

Un plugin profesional de WordPress para insertar banners inteligentes de AliExpress de forma autom√°tica en zonas estrat√©gicas de tu sitio web.

## üöÄ Caracter√≠sticas Principales

### ü§ñ **NUEVA FUNCIONALIDAD: Ads Autom√°ticos Estilo AdSense**
- üß† **Colocaci√≥n autom√°tica inteligente** como Google AdSense
- üìä **Algoritmos de optimizaci√≥n** que aprenden las mejores posiciones
- ‚öôÔ∏è **Configuraci√≥n de densidad** (baja, media, alta)
- üéØ **Sistema de aprendizaje autom√°tico** para maximizar CTR
- üì± **Ads sticky/flotantes** con posicionamiento responsive
- üìà **Analytics de rendimiento** por posici√≥n autom√°tica

### ‚ú® **Funcionalidades Principales**
- ‚úÖ **Inserci√≥n autom√°tica** en header, footer, contenido, sidebar y barra flotante
- üìä **Estad√≠sticas detalladas** de impresiones y clics 
- üéØ **Algoritmo inteligente** de selecci√≥n por categor√≠as
- üì± **Totalmente responsive** y compatible con m√≥viles
- ‚öôÔ∏è **Panel de administraci√≥n completo** con dashboard visual
- üîß **M√∫ltiples tipos**: im√°genes con enlace o c√≥digos iframe
- üé® **Widget personalizable** para sidebars
- üìã **Shortcode [ali_banner]** para inserci√≥n manual
- üîÑ **Rotaci√≥n autom√°tica** de banners
- üìà **Tracking de rendimiento** con CTR
- üåô **Modo oscuro** y soporte de accesibilidad

## üì¶ Estructura del Plugin

```
aliexpress-smart-ads/
‚îú‚îÄ‚îÄ aliexpress-smart-ads.php      # Archivo principal
‚îú‚îÄ‚îÄ includes/                     # Clases PHP
‚îÇ   ‚îú‚îÄ‚îÄ helpers.php              # Funciones auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ class-ali-admin.php      # Panel de administraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ class-ali-banner.php     # Modelo de datos CRUD
‚îÇ   ‚îú‚îÄ‚îÄ class-ali-display.php    # L√≥gica de inserci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ class-ali-stats.php      # Sistema de estad√≠sticas
‚îú‚îÄ‚îÄ assets/                      # Recursos frontend
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ali-banners.css      # Estilos frontend
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ali-admin.css        # Estilos admin
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ali-banners.js       # JavaScript frontend
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ali-admin.js         # JavaScript admin
‚îÇ   ‚îî‚îÄ‚îÄ images/                  # Im√°genes del plugin
‚îî‚îÄ‚îÄ uninstall.php               # Limpieza en desinstalaci√≥n
```

## üõ†Ô∏è Instalaci√≥n

1. **Descarga** todos los archivos del plugin
2. **Sube la carpeta** `plugin-adAli` a `/wp-content/plugins/`
3. **Activa el plugin** desde el panel de WordPress
4. **Configura** desde `AliExpress Ads` en el men√∫ del admin

## üìñ Gu√≠a de Uso R√°pido

### 1. Crear tu primer banner

1. Ve a **AliExpress Ads > A√±adir Banner**
2. Completa los campos:
   - **T√≠tulo**: Nombre interno del banner
   - **Tipo**: Imagen con enlace o c√≥digo iframe
   - **URL Imagen**: Enlace directo a la imagen del banner
   - **URL Destino**: Link de AliExpress (con tu c√≥digo de afiliado)
   - **Categor√≠a**: Para qu√© posts mostrar el banner
   - **Ubicaci√≥n**: D√≥nde insertarlo autom√°ticamente

### 2. Configurar inserci√≥n autom√°tica

1. Ve a **AliExpress Ads > Configuraci√≥n**
2. Activa las ubicaciones donde quieres mostrar banners:
   - ‚úÖ Header (cabecera)
   - ‚úÖ Contenido de posts
   - ‚úÖ Footer (pie de p√°gina)
   - ‚úÖ Barra flotante
   - ‚úÖ Entre art√≠culos

### 3. Inserci√≥n manual

**Shortcode:**
```php
[ali_banner category="smartphones"]
[ali_banner id="123"]
```

**Widget:**
- Ve a **Apariencia > Widgets**
- A√±ade el widget "AliExpress Smart Banner"

**Funci√≥n PHP:**
```php
echo Ali_Display::render_banner($banner, 'sidebar');
```

## ü§ñ Ads Autom√°ticos Estilo AdSense (NUEVO)

### ¬øQu√© son los Ads Autom√°ticos?

Los ads autom√°ticos funcionan exactamente como **Google AdSense**, colocando banners de AliExpress de forma inteligente y autom√°tica en las mejores posiciones de tu sitio web, sin necesidad de configuraci√≥n manual.

### Configuraci√≥n de Ads Autom√°ticos

1. **Ve a AliExpress Ads > Auto Ads**
2. **Activa los Ads Autom√°ticos** con el interruptor principal
3. **Configura la densidad**:
   - üü¢ **Baja**: Pocos ads, experiencia limpia
   - üü° **Media**: Balance √≥ptimo (recomendado)
   - üî¥ **Alta**: M√°ximos ingresos

### Tipos de Ads Autom√°ticos

#### üìù **Ads en Contenido de Posts**
- Se insertan autom√°ticamente entre p√°rrafos
- Algoritmo inteligente elige las mejores posiciones
- Configurable: frecuencia y n√∫mero m√°ximo por post

#### üìå **Ads Sticky (Flotantes)**
- Aparecen despu√©s de X segundos
- Posiciones: arriba, abajo o lateral
- Bot√≥n de cerrar opcional

#### üìã **Ads en Listados**
- Entre posts en p√°gina de inicio, categor√≠as, etc.
- Frecuencia configurable (cada X posts)

#### ‚û°Ô∏è **Ads en Sidebar**
- Inserci√≥n autom√°tica en barras laterales
- Posici√≥n configurable (arriba, medio, abajo)

### üß† Sistema de Optimizaci√≥n Inteligente

El plugin **aprende autom√°ticamente** cu√°les son las mejores posiciones:

1. **Recopila datos** de impresiones y clics por posici√≥n
2. **Calcula CTR** para cada ubicaci√≥n
3. **Optimiza autom√°ticamente** futuras inserciones
4. **Mejora el rendimiento** con el tiempo

### Estad√≠sticas de Ads Autom√°ticos

En la p√°gina **Auto Ads** puedes ver:
- üìä **Mejores posiciones por CTR**
- üìà **Rendimiento hist√≥rico**
- üéØ **Datos de optimizaci√≥n**
- üì± **An√°lisis por dispositivo**

## üéØ Tipos de Ubicaci√≥n

| Ubicaci√≥n | Descripci√≥n | Hook usado |
|-----------|-------------|------------|
| `header` | En la cabecera | `wp_head` |
| `footer` | En el pie | `wp_footer` |
| `in_content` | Dentro del post | `the_content` |
| `sidebar` | Barra lateral | Widget |
| `floating_bar` | Barra flotante | `wp_footer` |
| `between_articles` | Entre posts | `loop_end` |

## üìä Sistema de Estad√≠sticas

El plugin incluye un completo sistema de tracking:

- **Impresiones**: Cu√°ntas veces se ha visto el banner
- **Clics**: Cu√°ntas veces se ha clickeado
- **CTR**: Click Through Rate (porcentaje de efectividad)
- **Eventos detallados**: IP, user agent, referrer, etc.

### URLs de tracking
El plugin intercepta clics con URLs como:
```
https://tuweb.com/?ali_click=123
```

## ‚öôÔ∏è Configuraci√≥n Avanzada

### Opciones principales

```php
$options = array(
    'affiliate_id' => 'tu_id_afiliado',
    'auto_insert_content' => true,
    'content_position' => 'after_first_paragraph',
    'max_banners_per_page' => 3,
    'floating_bar_position' => 'bottom',
    'between_posts_interval' => 3
);
```

### Hooks para desarrolladores

```php
// Modificar HTML del banner
add_filter('ali_ads_banner_html', 'custom_banner_html', 10, 3);

// Controlar d√≥nde mostrar banners
add_filter('ali_ads_should_show_banners', 'custom_banner_conditions');

// Personalizar algoritmo de selecci√≥n
add_filter('ali_ads_banner_selection', 'custom_selection_algorithm');
```

## üé® Personalizaci√≥n CSS

### Clases CSS disponibles

```css
.ali-banner                    /* Banner general */
.ali-placement-header          /* Banner en header */
.ali-placement-footer          /* Banner en footer */
.ali-placement-in_content      /* Banner en contenido */
.ali-placement-sidebar         /* Banner en sidebar */
.ali-placement-floating_bar    /* Barra flotante */
.ali-placement-between_articles /* Entre art√≠culos */
```

### Ejemplo de personalizaci√≥n

```css
/* Personalizar barra flotante */
.ali-placement-floating_bar {
    background: linear-gradient(45deg, #ff6b6b, #feca57);
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

/* Banners en contenido con sombra */
.ali-placement-in_content img {
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.ali-placement-in_content:hover img {
    transform: scale(1.05);
}
```

## üì± Responsive y M√≥vil

El plugin es completamente responsive:

- Las im√°genes se adaptan autom√°ticamente
- La barra flotante se reposiciona en m√≥vil  
- Los banners se optimizan para pantallas peque√±as
- Soporte para gestos t√°ctiles

## üîß Base de Datos

### Tabla principal: `wp_aliexpress_ads`

| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | INT | ID √∫nico del banner |
| `title` | VARCHAR(255) | T√≠tulo del banner |
| `image_url` | TEXT | URL de la imagen |
| `target_url` | TEXT | URL de destino |
| `iframe_code` | TEXT | C√≥digo iframe alternativo |
| `category` | VARCHAR(100) | Categor√≠a asociada |
| `placement` | VARCHAR(50) | Ubicaci√≥n del banner |
| `active` | BOOLEAN | Activo o inactivo |
| `impressions` | INT | Contador de impresiones |
| `clicks` | INT | Contador de clics |
| `created_at` | DATETIME | Fecha de creaci√≥n |
| `updated_at` | DATETIME | Fecha de actualizaci√≥n |

### Tabla de eventos: `wp_aliexpress_ads_events`

Registra clics detallados para an√°lisis avanzado.

## üö® Troubleshooting

### Problema: Los banners no se muestran

1. Verifica que el banner est√© **activo**
2. Comprueba la **configuraci√≥n de inserci√≥n autom√°tica**
3. Revisa que la **categor√≠a del post** coincida
4. Verifica que no hayas alcanzado el **m√°ximo de banners por p√°gina**

### Problema: Las estad√≠sticas no funcionan

1. Verifica que **JavaScript est√© habilitado**
2. Comprueba la **configuraci√≥n de AJAX**
3. Revisa los **permisos de base de datos**

### Problema: La barra flotante no se cierra

1. Verifica que **jQuery est√© cargado**
2. Comprueba **conflictos con otros plugins**
3. Revisa la **consola del navegador** por errores

## üîê Seguridad

El plugin incluye m√∫ltiples capas de seguridad:

- ‚úÖ **Validaci√≥n de nonces** en todas las acciones AJAX
- ‚úÖ **Sanitizaci√≥n** de todos los datos de entrada
- ‚úÖ **Verificaci√≥n de permisos** de usuario
- ‚úÖ **Validaci√≥n de URLs** de AliExpress
- ‚úÖ **Sanitizaci√≥n de c√≥digos iframe**
- ‚úÖ **Escape de salida HTML**

## üìà Optimizaci√≥n de Rendimiento

- **Lazy loading** de im√°genes
- **Cach√©** de consultas de banners
- **Minificaci√≥n** de CSS/JS
- **Carga condicional** de assets
- **Cleanup autom√°tico** de datos antiguos

## üåç Compatibilidad

- **WordPress**: 6.0+
- **PHP**: 7.4+
- **Navegadores**: Chrome, Firefox, Safari, Edge
- **Temas**: Compatible con todos los temas est√°ndar
- **Plugins**: Gutenberg, WooCommerce, SEO plugins
- **Multisite**: Totalmente compatible

## üìû Soporte y Desarrollo

### Logs de debug
Para habilitar logs de debug, a√±ade en `wp-config.php`:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

Los logs se guardar√°n en `/wp-content/debug.log`

### Estructura de desarrollo

```bash
# Instalar dependencias de desarrollo
npm install

# Compilar assets
npm run build

# Modo desarrollo con watch
npm run dev

# Linter de c√≥digo
npm run lint
```

## üìù Changelog

### Version 1.0.0
- ‚úÖ Lanzamiento inicial
- ‚úÖ Sistema completo de banners
- ‚úÖ Panel de administraci√≥n
- ‚úÖ Inserci√≥n autom√°tica
- ‚úÖ Estad√≠sticas detalladas
- ‚úÖ Soporte responsive
- ‚úÖ Shortcodes y widgets

## üìÑ Licencia

Este plugin est√° licenciado bajo GPL v2 o posterior.

## ü§ù Contribuir

¬°Las contribuciones son bienvenidas!

1. Fork del repositorio
2. Crea una rama para tu feature
3. Realiza tus cambios
4. Env√≠a un pull request

---

**¬°Monetiza tu sitio WordPress con banners inteligentes de AliExpress! üöÄ**#   p l u g i n - a d - a l i - w p  
 